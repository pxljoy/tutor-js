var Tutor=function(){this.steps=[],this.currentStep=0,function(){if(void 0===Tutor.prototype.uniqueid){var t=0;Tutor.prototype.uniqueid=function(){return void 0===this.__uniqueId&&(this.__uniqueId=++t),this.__uniqueId}}}(),this.uniqueid()};Tutor.prototype.addSteps=function(t){var o=this;for(i=0;i<t.length;i++){var n=t[i],e={on:n.options.on||"click",class:n.options.class||"tutor--current"};o.steps.push({el:$(n.el),options:n.options||e})}return this},Tutor.prototype.start=function(t,o){if(this.currentStep=0,!this.steps.length>0)throw"TutorJS Error: x Must contain atleast one step. See x.addStep()";return("function"==typeof t&&"object"!=typeof this.options||"function"==typeof o&&"object"!=typeof this.options)&&(this.options={},"function"==typeof t&&(this.options.start=t,t()),"function"==typeof o&&(this.options.end=o)),this.next(!1),this},Tutor.prototype.next=function(t){var o;o=void 0===t||t;var n,e=this.steps[this.currentStep];n="string"==typeof e.options.target?$(e.options.target):e.el,"function"==typeof e.options.start&&e.options.start(e);var i=this,s=function(){if(n.removeClass(e.options.class),"function"==typeof e.options.complete&&e.options.complete(e),!(i.currentStep+1<i.steps.length))return"function"==typeof i.options.end&&i.options.end(i,e),!0;i.currentStep+=1,i.next(!1)};return!1===o?(n.addClass(e.options.class),e.el.on(e.options.on+".tutorjs."+i.__uniqueId,function(t){if("function"==typeof e.options.eventHandler&&!0===e.options.wait)e.options.eventHandler.call(i,t,e);else if("function"==typeof e.options.eventHandler)e.options.eventHandler.call(i,t,e),e.el.off(e.options.on+".tutorjs."+i.__uniqueId),s();else{if(!0===e.options.wait)throw"TutorJS Error: options.wait[bool] must be used with an eventHandler[fn]";e.el.off(e.options.on+".tutorjs."+i.__uniqueId),s()}})):s(),this},Tutor.prototype.prev=function(){if(!(this.currentStep-1>=0))throw"TutorJS Error: x.prev[fn] cannot go back past 0";this.currentStep-=1;var t=this.steps[this.currentStep];("string"==typeof t.options.target?$(t.options.target):t.el).addClass(t.options.class),"function"==typeof t.options.start&&t.options.start(t);var o=this,n=this.steps[o.currentStep+1];n.el.off(n.options.on+".tutorjs."+o.__uniqueId),n.el.removeClass(n.options.class);var e=function(){"function"==typeof t.options.complete&&t.options.complete(t),o.next()};return t.el.on(t.options.on+".tutorjs."+o.__uniqueId,function(n){if(console.log(o.__uniqueId),"function"==typeof t.options.eventHandler&&!0===t.options.wait)t.options.eventHandler.call(o,n,t);else if("function"==typeof t.options.eventHandler)t.options.eventHandler.call(o,n,t),t.el.off(t.options.on+".tutorjs."+o.__uniqueId),e();else{if(!0===t.options.wait)throw"TutorJS Error: options.wait[bool] must be used with an eventHandler[fn]";t.el.off(t.options.on+".tutorjs."+o.__uniqueId),e()}}),this};
